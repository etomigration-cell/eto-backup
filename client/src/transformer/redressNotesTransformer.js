import moment from "moment";

/**
 * Map all aihwform record fields for full detail view.
 */
export function transformRedressNotes(record) {
  return {
    // Identifiers
    formResponseID:record.formResponseID,
    formIdentifier:record.formIdentifier,
    subjectID:record.subjectID,
    groupID:record.groupID,
    familyID:record.familyID,
    responseSetID:record.responseSetID,
    formID:record.formID,
    collectionTypeID:record.collectionTypeID,
    subjectTypeID:record.subjectTypeID,
    collectionID:record.collectionID,
    responseCreatedDate:record.responseCreatedDate ? moment(record.responseCreatedDate).format("DD/MM/YYYY") : null,
    programID:record.programID,
    auditStaffID:record.auditStaffID,
    auditDate:record.auditDate? moment(record.auditDate).format("DD/MM/YYYY") : null,
    dataEnteredByID:record.dataEnteredByID,
    draftSavedOn:record.draftSavedOn,
    removedDate:record.removedDate ? moment(record.removedDate).format("DD/MM/YYYY") : null,
    contactMethod_28605:record.contactMethod_28605,
contactMethod_28605_ResponseChoiceID:record.contactMethod_28605_ResponseChoiceID,
contactLocation_28606:record.contactLocation_28606,
contactLocation_28606_ResponseChoiceID:record.contactLocation_28606_ResponseChoiceID,
serviceType_28607:record.serviceType_28607,
serviceType_28607_ResponseChoiceID:record.serviceType_28607_ResponseChoiceID,
serviceSetting_28608:record.serviceSetting_28608,
serviceSetting_28608_ResponseChoiceID:record.serviceSetting_28608_ResponseChoiceID,
interpreterPresent_28609:record.interpreterPresent_28609,
interpreterPresent_28609_ResponseChoiceID:record.interpreterPresent_28609_ResponseChoiceID,
selectyourlocation_28614:record.selectyourlocation_28614,
selectyourlocation_28614_ResponseChoiceID:record.selectyourlocation_28614_ResponseChoiceID,
contactLocation_28617:record.contactLocation_28617,
contactLocation_28617_ResponseChoiceID:record.contactLocation_28617_ResponseChoiceID,
typeofNote_28619:record.typeofNote_28619,
typeofNote_28619_ResponseChoiceID:record.typeofNote_28619_ResponseChoiceID,
notes_28620:record.notes_28620,
howmanystaffdidthistogetherAtmost4_28621:record.howmanystaffdidthistogetherAtmost4_28621,
timespentwithparticipantPerstaffmember_28625:record.timespentwithparticipantPerstaffmember_28625,
timespentonbehalfofparticipantPerstaffmember_28626:record.timespentonbehalfofparticipantPerstaffmember_28626,
timespenttravellingNotwithparticipantPerstaffmember_28627:record.timespenttravellingNotwithparticipantPerstaffmember_28627,
totaltimespentwithparticipant_28628:record.totaltimespentwithparticipant_28628,
totaltimespentonbehalfofparticipant_28629:record.totaltimespentonbehalfofparticipant_28629,
totaltimespenttravelling_28630:record.totaltimespenttravelling_28630,
totalefforttimeforparticipant_28631:record.totalefforttimeforparticipant_28631,
selectyourname_28632:record.selectyourname_28632,
micahTeam_28633:record.micahTeam_28633,
selectthe2ndstaffperson_28634:record.selectthe2ndstaffperson_28634,
whatotherteamassisted_28635:record.whatotherteamassisted_28635,
whatWDYNwasthisactioninresponseto_28639:record.whatWDYNwasthisactioninresponseto_28639,
whatWDYNwasthisactioninresponseto_28639_SourceFormID:record.whatWDYNwasthisactioninresponseto_28639_SourceFormID,
whatWDYNwasthisactioninresponseto_28639_DisplayStr:record.whatWDYNwasthisactioninresponseto_28639_DisplayStr,
statusofNRSapplication_28727:record.statusofNRSapplication_28727,
statusofNRSapplication_28727_ResponseChoiceID:record.statusofNRSapplication_28727_ResponseChoiceID,
iftheparticipantisunabletoaccesstheSchemewasawarmreferraltoanothersuitableservicegiven_28728:record.iftheparticipantisunabletoaccesstheSchemewasawarmreferraltoanothersuitableservicegiven_28728,
iftheparticipantisunabletoaccesstheSchemewasawarmreferraltoanothersuitableservicegiven_28728_ResponseChoiceID:record.iftheparticipantisunabletoaccesstheSchemewasawarmreferraltoanothersuitableservicegiven_28728_ResponseChoiceID,
whatistheserviceprovidersnamesparticipantwasreferredto_28729:record.whatistheserviceprovidersnamesparticipantwasreferredto_28729,
wastheparticipantsupportedwerereferredtoknowmorelegalorfinancialcounsellingservice_28730:record.wastheparticipantsupportedwerereferredtoknowmorelegalorfinancialcounsellingservice_28730,
wastheparticipantsupportedwerereferredtoknowmorelegalorfinancialcounsellingservice_28730_ResponseChoiceID:record.wastheparticipantsupportedwerereferredtoknowmorelegalorfinancialcounsellingservice_28730_ResponseChoiceID,
referredto_28731:record.referredto_28731,
referredto_28731_ResponseChoiceID:record.referredto_28731_ResponseChoiceID,
otherservices_28732:record.otherservices_28732,
wastheparticipantreferredtoamainstreamorspecialistsupportservice_28736:record.wastheparticipantreferredtoamainstreamorspecialistsupportservice_28736,
wastheparticipantreferredtoamainstreamorspecialistsupportservice_28736_ResponseChoiceID:record.wastheparticipantreferredtoamainstreamorspecialistsupportservice_28736_ResponseChoiceID,
wastheparticipantreferredtoacounsellingserviceduringtheapplicationprocess_28737:record.wastheparticipantreferredtoacounsellingserviceduringtheapplicationprocess_28737,
wastheparticipantreferredtoacounsellingserviceduringtheapplicationprocess_28737_ResponseChoiceID:record.wastheparticipantreferredtoacounsellingserviceduringtheapplicationprocess_28737_ResponseChoiceID,
wastheparticipantreferredtoamainstreamorspecialistsupportservice_28738:record.wastheparticipantreferredtoamainstreamorspecialistsupportservice_28738,
wastheparticipantreferredtoamainstreamorspecialistsupportservice_28738_ResponseChoiceID:record.wastheparticipantreferredtoamainstreamorspecialistsupportservice_28738_ResponseChoiceID,
counsellingService_28739:record.counsellingService_28739,
counsellingService_28739_ResponseChoiceID:record.counsellingService_28739_ResponseChoiceID,
recognitionofsexualabuse_28743:record.recognitionofsexualabuse_28743,
recognitionofsexualabuse_28743_ResponseChoiceID:record.recognitionofsexualabuse_28743_ResponseChoiceID,
recognitionofimpactofsexualabuse_28744:record.recognitionofimpactofsexualabuse_28744,
recognitionofimpactofsexualabuse_28744_ResponseChoiceID:record.recognitionofimpactofsexualabuse_28744_ResponseChoiceID,
recognitionofrelatednonsexualabuse_28745:record.recognitionofrelatednonsexualabuse_28745,
recognitionofrelatednonsexualabuse_28745_ResponseChoiceID:record.recognitionofrelatednonsexualabuse_28745_ResponseChoiceID,
recognitionpersonwasinstitutionallyvulnerable_28746:record.recognitionpersonwasinstitutionallyvulnerable_28746,
recognitionpersonwasinstitutionallyvulnerable_28746_ResponseChoiceID:record.recognitionpersonwasinstitutionallyvulnerable_28746_ResponseChoiceID,
recognitionofextremecircumstancesofsexualabuse_28747:record.recognitionofextremecircumstancesofsexualabuse_28747,
recognitionofextremecircumstancesofsexualabuse_28747_ResponseChoiceID:record.recognitionofextremecircumstancesofsexualabuse_28747_ResponseChoiceID,
hasparticipantacceptedDPR_28749:record.hasparticipantacceptedDPR_28749,
hasparticipantacceptedDPR_28749_ResponseChoiceID:record.hasparticipantacceptedDPR_28749_ResponseChoiceID,
hasDPRcommenced_28750:record.hasDPRcommenced_28750,
hasDPRcommenced_28750_ResponseChoiceID:record.hasDPRcommenced_28750_ResponseChoiceID,
whoisthefacilitator_28751:record.whoisthefacilitator_28751,
datesetforapology_28752:record.datesetforapology_28752,
followuprequirednotes_28753:record.followuprequirednotes_28753,
hasparticipantaccpetedCPC_28755:record.hasparticipantaccpetedCPC_28755,
hasparticipantaccpetedCPC_28755_ResponseChoiceID:record.hasparticipantaccpetedCPC_28755_ResponseChoiceID,
hasCPCcommenced_28756:record.hasCPCcommenced_28756,
hasCPCcommenced_28756_ResponseChoiceID:record.hasCPCcommenced_28756_ResponseChoiceID,
whoisthepractitioner_28757:record.whoisthepractitioner_28757,
hasawarmreferralbeenmade_28861:record.hasawarmreferralbeenmade_28861,
hasawarmreferralbeenmade_28861_ResponseChoiceID:record.hasawarmreferralbeenmade_28861_ResponseChoiceID,
hasaNRSofferbeenreceived_28862:record.hasaNRSofferbeenreceived_28862,
hasaNRSofferbeenreceived_28862_ResponseChoiceID:record.hasaNRSofferbeenreceived_28862_ResponseChoiceID,
scoreassessedby_29634:record.scoreassessedby_29634,
scoreassessedby_29634_ResponseChoiceID:record.scoreassessedby_29634_ResponseChoiceID,
isthisthefirstpreorlastpostscore_29635:record.isthisthefirstpreorlastpostscore_29635,
isthisthefirstpreorlastpostscore_29635_ResponseChoiceID:record.isthisthefirstpreorlastpostscore_29635_ResponseChoiceID,
domainGoals_29636:record.domainGoals_29636,
domainGoals_29636_ResponseChoiceID:record.domainGoals_29636_ResponseChoiceID,
changedknowledgeandaccesstoinformationScore1Noprogressinincreasingaccesstoinformationandknowle_29638:record.changedknowledgeandaccesstoinformationScore1Noprogressinincreasingaccesstoinformationandknowle_29638,
changedknowledgeandaccesstoinformationScore1Noprogressinincreasingaccesstoinformationandknowle_29638_ResponseChoiceID:record.changedknowledgeandaccesstoinformationScore1Noprogressinincreasingaccesstoinformationandknowle_29638_ResponseChoiceID,
empowermentchoiceandcontroltomakeowndecisionsScore1Noprogressinincreasingconfidenceandexercisi_29639:record.empowermentchoiceandcontroltomakeowndecisionsScore1Noprogressinincreasingconfidenceandexercisi_29639,
empowermentchoiceandcontroltomakeowndecisionsScore1Noprogressinincreasingconfidenceandexercisi_29639_ResponseChoiceID:record.empowermentchoiceandcontroltomakeowndecisionsScore1Noprogressinincreasingconfidenceandexercisi_29639_ResponseChoiceID,
engagementwithrelevantsupportservicesScore1Noprogressinincreasingengagementwithsupportservices_29640:record.engagementwithrelevantsupportservicesScore1Noprogressinincreasingengagementwithsupportservices_29640,
engagementwithrelevantsupportservicesScore1Noprogressinincreasingengagementwithsupportservices_29640_ResponseChoiceID:record.engagementwithrelevantsupportservicesScore1Noprogressinincreasingengagementwithsupportservices_29640_ResponseChoiceID,
domainCircumstances_29641:record.domainCircumstances_29641,
domainCircumstances_29641_ResponseChoiceID:record.domainCircumstances_29641_ResponseChoiceID,
communityparticipationnetworksScore1Significantnegativeimpactofpoorcommunityparticipationnetwo_29643:record.communityparticipationnetworksScore1Significantnegativeimpactofpoorcommunityparticipationnetwo_29643,
communityparticipationnetworksScore1Significantnegativeimpactofpoorcommunityparticipationnetwo_29643_ResponseChoiceID:record.communityparticipationnetworksScore1Significantnegativeimpactofpoorcommunityparticipationnetwo_29643_ResponseChoiceID,
mentalhealthwellbeingandselfcareScore1Significantnegativeimpactofpoormentalhealthwellbeingands_29644:record.mentalhealthwellbeingandselfcareScore1Significantnegativeimpactofpoormentalhealthwellbeingands_29644,
mentalhealthwellbeingandselfcareScore1Significantnegativeimpactofpoormentalhealthwellbeingands_29644_ResponseChoiceID:record.mentalhealthwellbeingandselfcareScore1Significantnegativeimpactofpoormentalhealthwellbeingands_29644_ResponseChoiceID,
personalandfamilysafetyScore1Significantnegativeimpactofpoorpersonalandfamilysafetyonindepende_29645:record.personalandfamilysafetyScore1Significantnegativeimpactofpoorpersonalandfamilysafetyonindepende_29645,
personalandfamilysafetyScore1Significantnegativeimpactofpoorpersonalandfamilysafetyonindepende_29645_ResponseChoiceID:record.personalandfamilysafetyScore1Significantnegativeimpactofpoorpersonalandfamilysafetyonindepende_29645_ResponseChoiceID,
domainSatisfaction_29646:record.domainSatisfaction_29646,
domainSatisfaction_29646_ResponseChoiceID:record.domainSatisfaction_29646_ResponseChoiceID,
iambetterabletodealwithissuesthatsoughthelpwith_29648:record.iambetterabletodealwithissuesthatsoughthelpwith_29648,
iambetterabletodealwithissuesthatsoughthelpwith_29648_ResponseChoiceID:record.iambetterabletodealwithissuesthatsoughthelpwith_29648_ResponseChoiceID,
iamsatisfiedwiththeservicesIhavereceived_29649:record.iamsatisfiedwiththeservicesIhavereceived_29649,
iamsatisfiedwiththeservicesIhavereceived_29649_ResponseChoiceID:record.iamsatisfiedwiththeservicesIhavereceived_29649_ResponseChoiceID,
theservicelistenedtomeandunderstoodmyissues_29650:record.theservicelistenedtomeandunderstoodmyissues_29650,
theservicelistenedtomeandunderstoodmyissues_29650_ResponseChoiceID:record.theservicelistenedtomeandunderstoodmyissues_29650_ResponseChoiceID,
changedbehavioursScore1Noprogressinchangingbehavioursinareasrelevanttoclientsneedsandcircumsta_29651:record.changedbehavioursScore1Noprogressinchangingbehavioursinareasrelevanttoclientsneedsandcircumsta_29651,
changedbehavioursScore1Noprogressinchangingbehavioursinareasrelevanttoclientsneedsandcircumsta_29651_ResponseChoiceID:record.changedbehavioursScore1Noprogressinchangingbehavioursinareasrelevanttoclientsneedsandcircumsta_29651_ResponseChoiceID,
changedimmediatecrisisScore1NoprogressinreducingthenegativeimpactoftheimmediatecrisisScore2Lim_29652:record.changedimmediatecrisisScore1NoprogressinreducingthenegativeimpactoftheimmediatecrisisScore2Lim_29652,
changedimmediatecrisisScore1NoprogressinreducingthenegativeimpactoftheimmediatecrisisScore2Lim_29652_ResponseChoiceID:record.changedimmediatecrisisScore1NoprogressinreducingthenegativeimpactoftheimmediatecrisisScore2Lim_29652_ResponseChoiceID,
changedSkillsScore1NoprogressinincreasingskillsinareasrelevanttoclientsneedsandcircumstancesSc_29653:record.changedSkillsScore1NoprogressinincreasingskillsinareasrelevanttoclientsneedsandcircumstancesSc_29653,
changedSkillsScore1NoprogressinincreasingskillsinareasrelevanttoclientsneedsandcircumstancesSc_29653_ResponseChoiceID:record.changedSkillsScore1NoprogressinincreasingskillsinareasrelevanttoclientsneedsandcircumstancesSc_29653_ResponseChoiceID,
ageappropriatedevelopmentScore1Significantnegativeimpactofpoorageappropriatedevelopmentonindep_29654:record.ageappropriatedevelopmentScore1Significantnegativeimpactofpoorageappropriatedevelopmentonindep_29654,
ageappropriatedevelopmentScore1Significantnegativeimpactofpoorageappropriatedevelopmentonindep_29654_ResponseChoiceID:record.ageappropriatedevelopmentScore1Significantnegativeimpactofpoorageappropriatedevelopmentonindep_29654_ResponseChoiceID,
educationandskillstrainingScore1Significantnegativeimpactoflackofengagementwitheducationandtra_29655:record.educationandskillstrainingScore1Significantnegativeimpactoflackofengagementwitheducationandtra_29655,
educationandskillstrainingScore1Significantnegativeimpactoflackofengagementwitheducationandtra_29655_ResponseChoiceID:record.educationandskillstrainingScore1Significantnegativeimpactoflackofengagementwitheducationandtra_29655_ResponseChoiceID,
employmentScore1Significantnegativeimpactoflackofemploymentonindependenceparticipationandwellb_29657:record.employmentScore1Significantnegativeimpactoflackofemploymentonindependenceparticipationandwellb_29657,
employmentScore1Significantnegativeimpactoflackofemploymentonindependenceparticipationandwellb_29657_ResponseChoiceID:record.employmentScore1Significantnegativeimpactoflackofemploymentonindependenceparticipationandwellb_29657_ResponseChoiceID,
familyFunctioningScore1Significantnegativeimpactofpoorfamilyfunctioningonindependenceparticipa_29658:record.familyFunctioningScore1Significantnegativeimpactofpoorfamilyfunctioningonindependenceparticipa_29658,
familyFunctioningScore1Significantnegativeimpactofpoorfamilyfunctioningonindependenceparticipa_29658_ResponseChoiceID:record.familyFunctioningScore1Significantnegativeimpactofpoorfamilyfunctioningonindependenceparticipa_29658_ResponseChoiceID,
financialresilienceScore1Significantnegativeimpactofpoorfinancialresilienceonindependenceparti_29659:record.financialresilienceScore1Significantnegativeimpactofpoorfinancialresilienceonindependenceparti_29659,
financialresilienceScore1Significantnegativeimpactofpoorfinancialresilienceonindependenceparti_29659_ResponseChoiceID:record.financialresilienceScore1Significantnegativeimpactofpoorfinancialresilienceonindependenceparti_29659_ResponseChoiceID,
housingScore1Significantnegativeimpactofpoorhousingonindependenceparticipationandwellbeingegro_29660:record.housingScore1Significantnegativeimpactofpoorhousingonindependenceparticipationandwellbeingegro_29660,
housingScore1Significantnegativeimpactofpoorhousingonindependenceparticipationandwellbeingegro_29660_ResponseChoiceID:record.housingScore1Significantnegativeimpactofpoorhousingonindependenceparticipationandwellbeingegro_29660_ResponseChoiceID,
materialwellbeingandbasicnecessitiesScore1Significantnegativeimpactoflackofbasicmaterialresour_29661:record.materialwellbeingandbasicnecessitiesScore1Significantnegativeimpactoflackofbasicmaterialresour_29661,
materialwellbeingandbasicnecessitiesScore1Significantnegativeimpactoflackofbasicmaterialresour_29661_ResponseChoiceID:record.materialwellbeingandbasicnecessitiesScore1Significantnegativeimpactoflackofbasicmaterialresour_29661_ResponseChoiceID,
physicalhealthScore1Significantnegativeimpactofpoorphysicalhealthonindependenceparticipationan_29662:record.physicalhealthScore1Significantnegativeimpactofpoorphysicalhealthonindependenceparticipationan_29662,
physicalhealthScore1Significantnegativeimpactofpoorphysicalhealthonindependenceparticipationan_29662_ResponseChoiceID:record.physicalhealthScore1Significantnegativeimpactofpoorphysicalhealthonindependenceparticipationan_29662_ResponseChoiceID,
scoring_31497:record.scoring_31497,
auditName:record.fName+" "+record.lName,
subjectName:record.subjectName,
programName:record.programName,
entityName:record.entityName,
  };
}


export function transformredressNotes(records) {
  const minimalKeys = [
    "auditDate",
    "responseCreatedDate",
    "auditName",
    "entityName",    
   // "programName",
    //"auditName"
    
  ];

  // Map all records to frontend format first
  const mapped = records.map(transformRedressNotes);

  // Then extract minimal information from mapped records
  const minimal = mapped.map(rec =>
    ({
      ...Object.fromEntries(
        minimalKeys.map(key => [key, rec[key]])
      ),
      StaffName: `${rec.fName || ''} ${rec.lName || ''}`.trim(),
    })
  );

  return {
    minimal,
    full: mapped
  };
}